{\rtf1\ansi\ansicpg1252\cocoartf2867
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;\f1\fnil\fcharset0 Menlo-Bold;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red156\green105\blue151;\red47\green180\blue29;
\red192\green192\blue192;\red111\green111\blue111;\red180\green36\blue25;\red46\green174\blue187;\red159\green160\blue28;
\red200\green20\blue201;}
{\*\expandedcolortbl;;\csgray\c0;\cssrgb\c67843\c49804\c65882;\cssrgb\c20241\c73898\c14950;
\cssrgb\c79890\c79890\c79890;\cssrgb\c51167\c51167\c51167;\cssrgb\c76411\c21697\c12527;\cssrgb\c20199\c73241\c78251;\cssrgb\c68469\c68012\c14211;
\cssrgb\c83397\c23074\c82666;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0

\f0\fs22 \cf2 \CocoaLigature0 > stundenliste-next@0.1.0 dev\
> next dev --turbopack --port 3001\
\
[stundenliste-next] basePath disabled\
[stundenliste-next] basePath disabled\
   
\f1\b \cf3 \uc0\u9650  Next.js 15.5.4
\f0\b0 \cf2  (Turbopack)\
   - Local:        http://localhost:3001\
   - Network:      http://192.168.2.80:3001\
   - Environments: .env.local\
\
 
\f1\b \cf4 \uc0\u10003 
\f0\b0 \cf2  Starting...\
 
\f1\b \cf4 \uc0\u10003 
\f0\b0 \cf2  Compiled middleware in 60ms\
 
\f1\b \cf4 \uc0\u10003 
\f0\b0 \cf2  Ready in 828ms\
 
\f1\b \cf5 \uc0\u9675 
\f0\b0 \cf2  Compiling /admin/mitarbeitende/[employeeId] ...\
 
\f1\b \cf4 \uc0\u10003 
\f0\b0 \cf2  Compiled /admin/mitarbeitende/[employeeId] in 1499ms\
PRAGMA journal_mode = WAL\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, username, password, Rolle as role_id, first_name, last_name, email\
     FROM employees\
     WHERE LOWER(username) = LOWER('Admin')\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, username, password, Rolle as role_id, first_name, last_name, email\
     FROM employees\
     WHERE LOWER(username) = LOWER('Admin')\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
CREATE TABLE IF NOT EXISTS admin_document_seen (\
       admin_id INTEGER PRIMARY KEY,\
       last_seen REAL NOT NULL DEFAULT 0\
     )\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT last_seen FROM admin_document_seen WHERE admin_id = 1.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, first_name, last_name, username, Rolle, COALESCE(is_active, 1) AS is_active, COALESCE(show_in_calendar, 1) AS show_in_calendar FROM employees ORDER BY is_active DESC, last_name COLLATE NOCASE, first_name COLLATE NOCASE\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT eb.employee_id, b.id, b.name\
       FROM employee_branches eb\
       INNER JOIN branches b ON b.id = eb.branch_id\
       WHERE eb.employee_id IN (22.0, 23.0, 1.0, 18.0, 5.0, 3.0, 2.0, 17.0, 15.0, 16.0, 19.0, 20.0)\
       ORDER BY eb.employee_id ASC, b.name COLLATE NOCASE ASC\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
CREATE TABLE IF NOT EXISTS leave_requests (\
      id INTEGER PRIMARY KEY AUTOINCREMENT,\
      employee_id INTEGER NOT NULL,\
      type TEXT NOT NULL CHECK (type IN ('vacation', 'overtime')),\
      start_date TEXT NOT NULL,\
      end_date TEXT NOT NULL,\
      start_time TEXT,\
      end_time TEXT,\
      reason TEXT,\
      status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'rejected')),\
      admin_note TEXT,\
      decided_by INTEGER,\
      decided_at TEXT,\
      cancellation_requested INTEGER NOT NULL DEFAULT 0,\
      cancellation_requested_at TEXT,\
      cancellation_note TEXT,\
      cancelled_at TEXT,\
      applied_to_shift_plan INTEGER NOT NULL DEFAULT 0,\
      created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
      updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
    );\
CREATE INDEX IF NOT EXISTS idx_leave_requests_employee\
      ON leave_requests(employee_id, created_at DESC);\
CREATE INDEX IF NOT EXISTS idx_leave_requests_status\
      ON leave_requests(status, created_at DESC);\
PRAGMA table_info(leave_requests)\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT COUNT(*) AS total\
         FROM leave_requests\
        WHERE status = 'pending' OR cancellation_requested = 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, first_name, last_name, username, Rolle, COALESCE(is_active, 1) AS is_active, COALESCE(show_in_calendar, 1) AS show_in_calendar FROM employees ORDER BY is_active DESC, last_name COLLATE NOCASE, first_name COLLATE NOCASE\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT eb.employee_id, b.id, b.name\
       FROM employee_branches eb\
       INNER JOIN branches b ON b.id = eb.branch_id\
       WHERE eb.employee_id IN (22.0, 23.0, 1.0, 18.0, 5.0, 3.0, 2.0, 17.0, 15.0, 16.0, 19.0, 20.0)\
       ORDER BY eb.employee_id ASC, b.name COLLATE NOCASE ASC\
Error: Route "/admin/mitarbeitende/[employeeId]" used `params.employeeId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\
    at AdminEmployeeDetailPage (src/app/admin/mitarbeitende/[employeeId]/page.tsx:1031:45)\
 \cf6  1029 |\cf2    \}\
 \cf6  1030 |\cf2 \

\f1\b \cf7 >
\f0\b0 \cf6  1031 |\cf2    \cf8 const\cf2  employeeId \cf9 =\cf2  \cf9 Number.\cf2 parseInt(params\cf9 .\cf2 employeeId\cf9 ,\cf2  \cf10 10\cf2 )\cf9 ;\cf2 \
 \cf6       |\cf2                                              
\f1\b \cf7 ^
\f0\b0 \cf2 \
 \cf6  1032 |\cf2    \cf8 if\cf2  (\cf9 !Number.\cf2 isFinite(employeeId) \cf9 ||\cf2  \cf9 !\cf2 adminEmployeeExists(employeeId)) \{\
 \cf6  1033 |\cf2      notFound()\cf9 ;\cf2 \
 \cf6  1034 |\cf2    \}\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT COUNT(*) AS total FROM employees WHERE id = 22.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
         id,\
         first_name,\
         last_name,\
         street,\
         zip_code,\
         city,\
         birth_date,\
         federal_state,\
         entry_date,\
         phone,\
         email,\
         personnel_number,\
         booking_pin,\
         arbeitsstunden_pro_woche,\
         tax_class,\
         hourly_wage,\
         kinderfreibetrag,\
         iban,\
         bic,\
         vacation_days,\
         vacation_days_last_year,\
         vacation_days_total,\
         Rolle,\
         username,\
         password,\
         imported_overtime_balance,\
         imported_minusstunden_balance,\
         imported_vacation_taken,\
         imported_bonus_earned,\
         max_ueberstunden,\
         max_minusstunden,\
         sachbezuege,\
         sachbezuege_amount,\
         mind_jahresumsatz,\
         yearly_soll_hours,\
         sachbezug_verpflegung,\
         monatlicher_bonus_prozent,\
         tillhub_user_id,\
         min_pause_under6_minutes,\
         mandatory_pause_enabled,\
         steuer_id,\
         social_security_number,\
         health_insurance,\
         health_insurance_number,\
         nationality,\
         marital_status,\
         employment_type,\
         work_time_model,\
        probation_months,\
        tarif_group,\
        emergency_contact_name,\
        emergency_contact_phone,\
        emergency_contact_relation,\
         COALESCE(is_active, 1) AS is_active,\
         COALESCE(show_in_calendar, 1) AS show_in_calendar\
       FROM employees\
       WHERE id = 22.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT b.id, b.name\
       FROM employee_branches eb\
       INNER JOIN branches b ON b.id = eb.branch_id\
       WHERE eb.employee_id = 22.0\
       ORDER BY b.name COLLATE NOCASE ASC\
Error: Route "/admin/mitarbeitende/[employeeId]" used `searchParams.year`. `searchParams` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\
    at AdminEmployeeDetailPage (src/app/admin/mitarbeitende/[employeeId]/page.tsx:1041:16)\
 \cf6  1039 |\cf2    \}\
 \cf6  1040 |\cf2 \

\f1\b \cf7 >
\f0\b0 \cf6  1041 |\cf2    \cf8 const\cf2  year \cf9 =\cf2  searchParams\cf9 ?.\cf2 year \cf9 ?\cf2  \cf9 Number.\cf2 parseInt(searchParams\cf9 .\cf2 year\cf9 ,\cf2  \cf10 10\cf2 ) \cf9 :\cf2  undefined\cf9 ;\cf2 \
 \cf6       |\cf2                 
\f1\b \cf7 ^
\f0\b0 \cf2 \
 \cf6  1042 |\cf2    \cf8 const\cf2  month \cf9 =\cf2  searchParams\cf9 ?.\cf2 month \cf9 ?\cf2  \cf9 Number.\cf2 parseInt(searchParams\cf9 .\cf2 month\cf9 ,\cf2  \cf10 10\cf2 ) \cf9 :\cf2  undefined\cf9 ;\cf2 \
 \cf6  1043 |\cf2    \cf8 const\cf2  dailyOverview \cf9 =\cf2  getDailyOverview(employeeId\cf9 ,\cf2  year\cf9 ,\cf2  month)\cf9 ;\cf2 \
 \cf6  1044 |\cf2    \cf8 const\cf2  bonusConfig \cf9 =\cf2  getEmployeeBonusConfiguration(employeeId)\cf9 ;\cf2 \
Error: Route "/admin/mitarbeitende/[employeeId]" used `searchParams.month`. `searchParams` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\
    at AdminEmployeeDetailPage (src/app/admin/mitarbeitende/[employeeId]/page.tsx:1042:17)\
 \cf6  1040 |\cf2 \
 \cf6  1041 |\cf2    \cf8 const\cf2  year \cf9 =\cf2  searchParams\cf9 ?.\cf2 year \cf9 ?\cf2  \cf9 Number.\cf2 parseInt(searchParams\cf9 .\cf2 year\cf9 ,\cf2  \cf10 10\cf2 ) \cf9 :\cf2  undefined\cf9 ;\cf2 \

\f1\b \cf7 >
\f0\b0 \cf6  1042 |\cf2    \cf8 const\cf2  month \cf9 =\cf2  searchParams\cf9 ?.\cf2 month \cf9 ?\cf2  \cf9 Number.\cf2 parseInt(searchParams\cf9 .\cf2 month\cf9 ,\cf2  \cf10 10\cf2 ) \cf9 :\cf2  undefined\cf9 ;\cf2 \
 \cf6       |\cf2                  
\f1\b \cf7 ^
\f0\b0 \cf2 \
 \cf6  1043 |\cf2    \cf8 const\cf2  dailyOverview \cf9 =\cf2  getDailyOverview(employeeId\cf9 ,\cf2  year\cf9 ,\cf2  month)\cf9 ;\cf2 \
 \cf6  1044 |\cf2    \cf8 const\cf2  bonusConfig \cf9 =\cf2  getEmployeeBonusConfiguration(employeeId)\cf9 ;\cf2 \
 \cf6  1045 |\cf2    \cf8 const\cf2  monthlySummary \cf9 =\cf2  getMonthlyAdminSummary(\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, employee_id, day_date, brutto, kommt1, geht1, kommt2, geht2, pause, code, bemerkungen, mittag, schicht, sick_hours, child_sick_hours, short_work_hours, vacation_hours, holiday_hours, overtime_delta, plan_hours, forced_overflow, forced_overflow_real, required_pause_under6_minutes, admin_last_change_at, admin_last_change_by, admin_last_change_type, admin_last_change_summary FROM daily_days WHERE employee_id = 22.0 ORDER BY day_date DESC, id DESC\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
    spd.employee_id,\
    spd.day_date,\
    spd.start_time,\
    spd.end_time,\
    spd.required_pause_minutes,\
    spd.label,\
    spd.branch_id,\
    b.name AS branch_name,\
    spd.created_at,\
    spd.updated_at\
    FROM shift_plan_days spd\
    LEFT JOIN branches b ON b.id = spd.branch_id\
    WHERE spd.employee_id = 22.0 ORDER BY day_date ASC\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, employee_id, year, month, status, closed_at, closed_by\
       FROM monthly_closings\
       WHERE employee_id = 22.0\
       ORDER BY year DESC, month DESC\
       LIMIT 240.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT scheme_type, linear_percent FROM bonus_scheme WHERE employee_id = 22.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT threshold, percent FROM bonus_tiers WHERE employee_id = 22.0 ORDER BY threshold\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
         id,\
         first_name,\
         last_name,\
         street,\
         zip_code,\
         city,\
         birth_date,\
         federal_state,\
         entry_date,\
         phone,\
         email,\
         personnel_number,\
         booking_pin,\
         arbeitsstunden_pro_woche,\
         tax_class,\
         hourly_wage,\
         kinderfreibetrag,\
         iban,\
         bic,\
         vacation_days,\
         vacation_days_last_year,\
         vacation_days_total,\
         Rolle,\
         username,\
         password,\
         imported_overtime_balance,\
         imported_minusstunden_balance,\
         imported_vacation_taken,\
         imported_bonus_earned,\
         max_ueberstunden,\
         max_minusstunden,\
         sachbezuege,\
         sachbezuege_amount,\
         mind_jahresumsatz,\
         yearly_soll_hours,\
         sachbezug_verpflegung,\
         monatlicher_bonus_prozent,\
         tillhub_user_id,\
         min_pause_under6_minutes,\
         mandatory_pause_enabled,\
         steuer_id,\
         social_security_number,\
         health_insurance,\
         health_insurance_number,\
         nationality,\
         marital_status,\
         employment_type,\
         work_time_model,\
        probation_months,\
        tarif_group,\
        emergency_contact_name,\
        emergency_contact_phone,\
        emergency_contact_relation,\
         COALESCE(is_active, 1) AS is_active,\
         COALESCE(show_in_calendar, 1) AS show_in_calendar\
       FROM employees\
       WHERE id = 22.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT b.id, b.name\
       FROM employee_branches eb\
       INNER JOIN branches b ON b.id = eb.branch_id\
       WHERE eb.employee_id = 22.0\
       ORDER BY b.name COLLATE NOCASE ASC\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT scheme_type, linear_percent FROM bonus_scheme WHERE employee_id = 22.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT threshold, percent FROM bonus_tiers WHERE employee_id = 22.0 ORDER BY threshold\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, employee_id, day_date, brutto, kommt1, geht1, kommt2, geht2, pause, code, bemerkungen, mittag, schicht, sick_hours, child_sick_hours, short_work_hours, vacation_hours, holiday_hours, overtime_delta, plan_hours, forced_overflow, forced_overflow_real, required_pause_under6_minutes, admin_last_change_at, admin_last_change_by, admin_last_change_type, admin_last_change_summary FROM daily_days WHERE employee_id = 22.0 ORDER BY day_date DESC, id DESC\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
    spd.employee_id,\
    spd.day_date,\
    spd.start_time,\
    spd.end_time,\
    spd.required_pause_minutes,\
    spd.label,\
    spd.branch_id,\
    b.name AS branch_name,\
    spd.created_at,\
    spd.updated_at\
    FROM shift_plan_days spd\
    LEFT JOIN branches b ON b.id = spd.branch_id\
    WHERE spd.employee_id = 22.0 AND day_date >= '2025-11-01' AND day_date <= '2025-11-30' ORDER BY day_date ASC\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-01'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-02'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-15'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-16'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-22'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-23'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-24'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-25'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-26'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-27'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-28'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-29'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
      spd.employee_id,\
      spd.day_date,\
      spd.start_time,\
      spd.end_time,\
      spd.required_pause_minutes,\
      spd.label,\
      spd.branch_id,\
      b.name AS branch_name,\
      spd.created_at,\
      spd.updated_at\
     FROM shift_plan_days spd\
     LEFT JOIN branches b ON b.id = spd.branch_id\
     WHERE spd.employee_id = 22.0 AND spd.day_date = '2025-11-30'\
     LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT\
      two_week_cycle,\
      W1_mon_start AS w1_mon_start,\
      W1_mon_end AS w1_mon_end,\
      W1_tue_start AS w1_tue_start,\
      W1_tue_end AS w1_tue_end,\
      W1_wed_start AS w1_wed_start,\
      W1_wed_end AS w1_wed_end,\
      W1_thu_start AS w1_thu_start,\
      W1_thu_end AS w1_thu_end,\
      W1_fri_start AS w1_fri_start,\
      W1_fri_end AS w1_fri_end,\
      W1_sat_start AS w1_sat_start,\
      W1_sat_end AS w1_sat_end,\
      W1_sun_start AS w1_sun_start,\
      W1_sun_end AS w1_sun_end,\
      W2_mon_start AS w2_mon_start,\
      W2_mon_end AS w2_mon_end,\
      W2_tue_start AS w2_tue_start,\
      W2_tue_end AS w2_tue_end,\
      W2_wed_start AS w2_wed_start,\
      W2_wed_end AS w2_wed_end,\
      W2_thu_start AS w2_thu_start,\
      W2_thu_end AS w2_thu_end,\
      W2_fri_start AS w2_fri_start,\
      W2_fri_end AS w2_fri_end,\
      W2_sat_start AS w2_sat_start,\
      W2_sat_end AS w2_sat_end,\
      W2_sun_start AS w2_sun_start,\
      W2_sun_end AS w2_sun_end,\
      W1_mon_req_pause_min AS w1_mon_req_pause_min,\
      W1_tue_req_pause_min AS w1_tue_req_pause_min,\
      W1_wed_req_pause_min AS w1_wed_req_pause_min,\
      W1_thu_req_pause_min AS w1_thu_req_pause_min,\
      W1_fri_req_pause_min AS w1_fri_req_pause_min,\
      W1_sat_req_pause_min AS w1_sat_req_pause_min,\
      W1_sun_req_pause_min AS w1_sun_req_pause_min,\
      W2_mon_req_pause_min AS w2_mon_req_pause_min,\
      W2_tue_req_pause_min AS w2_tue_req_pause_min,\
      W2_wed_req_pause_min AS w2_wed_req_pause_min,\
      W2_thu_req_pause_min AS w2_thu_req_pause_min,\
      W2_fri_req_pause_min AS w2_fri_req_pause_min,\
      W2_sat_req_pause_min AS w2_sat_req_pause_min,\
      W2_sun_req_pause_min AS w2_sun_req_pause_min\
    FROM shift_plans\
    WHERE employee_id = 22.0\
    LIMIT 1\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
    spd.employee_id,\
    spd.day_date,\
    spd.start_time,\
    spd.end_time,\
    spd.required_pause_minutes,\
    spd.label,\
    spd.branch_id,\
    b.name AS branch_name,\
    spd.created_at,\
    spd.updated_at\
    FROM shift_plan_days spd\
    LEFT JOIN branches b ON b.id = spd.branch_id\
    WHERE spd.employee_id = 22.0 AND day_date >= '2025-11-01' AND day_date <= '2025-11-30' ORDER BY day_date ASC\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
CREATE TABLE IF NOT EXISTS employee_overtime_payouts (\
       employee_id INTEGER NOT NULL,\
       year INTEGER NOT NULL,\
       month INTEGER NOT NULL,\
       payout_hours REAL NOT NULL DEFAULT 0,\
       PRIMARY KEY (employee_id, year, month)\
     )\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT payout_hours\
       FROM employee_overtime_payouts\
       WHERE employee_id = 22.0 AND year = 2025.0 AND month = 11.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
CREATE TABLE IF NOT EXISTS employee_overtime_payouts (\
       employee_id INTEGER NOT NULL,\
       year INTEGER NOT NULL,\
       month INTEGER NOT NULL,\
       payout_hours REAL NOT NULL DEFAULT 0,\
       PRIMARY KEY (employee_id, year, month)\
     )\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT SUM(payout_hours) AS total\
       FROM employee_overtime_payouts\
       WHERE employee_id = 22.0\
         AND (year < 2025.0 OR (year = 2025.0 AND month <= 11.0))\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
CREATE TABLE IF NOT EXISTS employee_bonus (\
       employee_id INTEGER NOT NULL,\
       year INTEGER NOT NULL,\
       month INTEGER NOT NULL,\
       auszahlung REAL DEFAULT 0,\
       uebertrag REAL DEFAULT 0,\
       PRIMARY KEY (employee_id, year, month)\
     )\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT auszahlung, uebertrag\
       FROM employee_bonus\
       WHERE employee_id = 22.0 AND year = 2025.0 AND month = 10.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
CREATE TABLE IF NOT EXISTS employee_bonus (\
       employee_id INTEGER NOT NULL,\
       year INTEGER NOT NULL,\
       month INTEGER NOT NULL,\
       auszahlung REAL DEFAULT 0,\
       uebertrag REAL DEFAULT 0,\
       PRIMARY KEY (employee_id, year, month)\
     )\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT auszahlung, uebertrag\
       FROM employee_bonus\
       WHERE employee_id = 22.0 AND year = 2025.0 AND month = 11.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
CREATE TABLE IF NOT EXISTS footer_view_settings (\
       user_id INTEGER PRIMARY KEY,\
       group_states TEXT\
     )\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT group_states FROM footer_view_settings WHERE user_id = 22.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, employee_id, year, month, status, closed_at, closed_by\
       FROM monthly_closings\
       WHERE employee_id = 22.0 AND year = 2025.0 AND month = 11.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, employee_id, year, month, status, closed_at, closed_by\
       FROM monthly_closings\
       WHERE employee_id = 22.0\
       ORDER BY year DESC, month DESC\
       LIMIT 12.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, employee_id, day_date, brutto, kommt1, geht1, kommt2, geht2, pause, code, bemerkungen, mittag, schicht, sick_hours, child_sick_hours, short_work_hours, vacation_hours, holiday_hours, overtime_delta, plan_hours, forced_overflow, forced_overflow_real, required_pause_under6_minutes, admin_last_change_at, admin_last_change_by, admin_last_change_type, admin_last_change_summary FROM daily_days WHERE employee_id = 22.0 ORDER BY day_date DESC, id DESC LIMIT 60.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, sachbezug_verpflegung, min_pause_under6_minutes, federal_state\
       FROM employees\
       WHERE id = 22.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT spd.id,\
    spd.employee_id,\
    spd.day_date,\
    spd.start_time,\
    spd.end_time,\
    spd.required_pause_minutes,\
    spd.label,\
    spd.branch_id,\
    b.name AS branch_name,\
    spd.created_at,\
    spd.updated_at\
    FROM shift_plan_days spd\
    LEFT JOIN branches b ON b.id = spd.branch_id\
    WHERE spd.employee_id = 22.0 ORDER BY day_date ASC\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, employee_id, year, month, status, closed_at, closed_by\
       FROM monthly_closings\
       WHERE employee_id = 22.0\
       ORDER BY year DESC, month DESC\
       LIMIT 24.0\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT employee_id, weekday, minutes, updated_at\
       FROM employee_weekday_pauses\
       WHERE employee_id = 22.0\
       ORDER BY weekday ASC\
CREATE TABLE IF NOT EXISTS shift_plan_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        employee_id INTEGER NOT NULL,\
        day_date TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        UNIQUE(employee_id, day_date)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_employee_date\
      ON shift_plan_days(employee_id, day_date);\
CREATE TABLE IF NOT EXISTS shift_plan_templates (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
CREATE TABLE IF NOT EXISTS shift_plan_template_days (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        template_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        mode TEXT NOT NULL,\
        start_time TEXT,\
        end_time TEXT,\
        required_pause_minutes INTEGER NOT NULL DEFAULT 0,\
        label TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (template_id) REFERENCES shift_plan_templates(id) ON DELETE CASCADE,\
        UNIQUE(template_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_shift_plan_template_days_template\
      ON shift_plan_template_days(template_id, weekday, segment_index);\
CREATE TABLE IF NOT EXISTS branches (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        name TEXT NOT NULL UNIQUE,\
        slug TEXT,\
        timezone TEXT,\
        address_line1 TEXT,\
        address_line2 TEXT,\
        postal_code TEXT,\
        city TEXT,\
        country TEXT,\
        phone TEXT,\
        email TEXT,\
        metadata TEXT,\
        opening_hours TEXT,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP\
      );\
PRAGMA table_info(branches)\
CREATE UNIQUE INDEX IF NOT EXISTS idx_branches_slug\
      ON branches(slug)\
      WHERE slug IS NOT NULL AND slug <> ''\
    \
SELECT id, name, slug, street, address_line1, postal_code, city, timezone, country\
         FROM branches\
CREATE TABLE IF NOT EXISTS branch_schedules (\
        id INTEGER PRIMARY KEY AUTOINCREMENT,\
        branch_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        segment_index INTEGER NOT NULL DEFAULT 0,\
        starts_at_minutes INTEGER,\
        ends_at_minutes INTEGER,\
        is_active INTEGER NOT NULL DEFAULT 1,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,\
        UNIQUE(branch_id, weekday, segment_index)\
      );\
CREATE INDEX IF NOT EXISTS idx_branch_schedules_branch_weekday\
      ON branch_schedules(branch_id, weekday)\
    \
PRAGMA foreign_keys = ON;\
CREATE TABLE IF NOT EXISTS employee_branches (\
        employee_id INTEGER NOT NULL,\
        branch_id INTEGER NOT NULL,\
        created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, branch_id),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,\
        FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE\
      );\
PRAGMA table_info(employees)\
SELECT id, booking_pin FROM employees ORDER BY id\
CREATE UNIQUE INDEX IF NOT EXISTS idx_employees_booking_pin ON employees(booking_pin);\
PRAGMA table_info(shift_plan_days)\
CREATE INDEX IF NOT EXISTS idx_shift_plan_days_branch ON shift_plan_days(branch_id)\
PRAGMA table_info(daily_days)\
CREATE TABLE IF NOT EXISTS employee_weekday_pauses (\
        employee_id INTEGER NOT NULL,\
        weekday INTEGER NOT NULL,\
        minutes INTEGER NOT NULL DEFAULT 0,\
        updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,\
        PRIMARY KEY (employee_id, weekday),\
        FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE\
      );\
SELECT id, slug, name, timezone, address_line1, address_line2, postal_code, city, country, phone, email, metadata, created_at, updated_at\
       FROM branches\
       ORDER BY name COLLATE NOCASE ASC\
SELECT branch_id, weekday, segment_index, starts_at_minutes, ends_at_minutes, is_active\
       FROM branch_schedules\
       WHERE branch_id IN (2.0, 1.0)\
       ORDER BY branch_id ASC, weekday ASC, segment_index ASC\
 GET /admin/mitarbeitende/22?tab=management \cf4 200\cf2  in 2978ms\
 
\f1\b \cf4 \uc0\u10003 
\f0\b0 \cf2  Compiled /favicon.ico in 90ms\
 GET /favicon.ico?favicon.0b3bf435.ico \cf4 200\cf2  in 370ms\
\
}